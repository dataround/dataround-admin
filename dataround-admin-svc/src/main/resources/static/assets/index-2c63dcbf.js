import{r as n,A as y,_ as b,F as r,k as j,l as z,n as q,s as R,j as e,T as B,B as p,o as D,q as m,S as P}from"./index-92514c79.js";import{T as $,M as _,E as V,P as L}from"./EditOutlined-0b8e7fe2.js";import"./DownOutlined-1f22e0cf.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};const K=H;var Y=function(c,o){return n.createElement(y,b({},c,{ref:o,icon:K}))},G=n.forwardRef(Y);const J=G;var N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};const Q=N;var W=function(c,o){return n.createElement(y,b({},c,{ref:o,icon:Q}))},X=n.forwardRef(W);const Z=X,ee=()=>{const[i]=r.useForm(),[c,o]=n.useState(0),[v,u]=n.useState(!1),[S,h]=n.useState("新建用户"),[k,T]=n.useState([]),[w,ae]=n.useState(0),[C,I]=n.useState(10),O=[{title:"用户Id",dataIndex:"key",key:"key"},{title:"用户名",dataIndex:"name",key:"name"},{title:"邮箱",dataIndex:"email",key:"age"},{title:"移动电话",dataIndex:"cellphone",key:"cellphone"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"更新时间",key:"updateTime",dataIndex:"updateTime"},{title:"状态",key:"disabled",dataIndex:"disabled",render:(a,t)=>e.jsx(e.Fragment,{children:t.disabled?e.jsx(e.Fragment,{children:"禁用"}):e.jsx(e.Fragment,{children:"启用"})})},{title:"操作",key:"action",render:(a,t)=>e.jsxs(P,{size:"small",children:[e.jsxs(p,{type:"link",style:{padding:0,gap:"4px"},onClick:()=>M(t),children:[e.jsx(V,{}),"编辑"]}),e.jsx(L,{title:"确认修改用户状态？",onConfirm:()=>U(t),children:e.jsxs(p,{type:"link",style:{padding:0,gap:"4px"},children:[t.disabled?e.jsxs(e.Fragment,{children:[e.jsx(Z,{})," 启用"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{})," 禁用"]})," "]})})]})}],x=j(z,{wrapperFun:a=>{const t=[],l=a.records;return Object.keys(l).forEach(d=>{t.push({key:l[d].id,name:l[d].name,email:l[d].email,cellphone:l[d].cellphone,passwd:l[d].passwd,disabled:l[d].disabled,createTime:l[d].createTime,updateTime:l[d].updateTime})}),T(t),t}});n.useEffect(()=>{x.caller()},[c]);const F=[{key:"key1",label:"用户列表",children:""}],A=(a,t)=>{I(t),x.caller({current:a,size:t})},s={id:"",name:"",email:"",cellphone:"",passwd:""},E=()=>{h("新建用户"),s.name="",s.email="",s.cellphone="",s.passwd="",i.setFieldsValue(s),u(!0)},g=j(R,{wrapperFun:a=>{q.success("用户保存成功"),u(!1),o(Math.random)}}),M=a=>{h("编辑用户"),s.id=a.key,s.name=a.name,s.email=a.email,s.cellphone=a.cellphone,s.passwd=a.passwd,i.setFieldsValue(s),u(!0)},U=a=>{g.caller({id:a.key,disabled:!a.disabled})},f=()=>{i.validateFields().then(a=>{const t={...a};g.caller(t)})};return e.jsxs(e.Fragment,{children:[e.jsx(B,{defaultActiveKey:"1",items:F,tabBarExtraContent:e.jsx(p,{type:"primary",htmlType:"submit",onClick:E,children:"新建用户"})}),e.jsx($,{size:"small",columns:O,dataSource:k,pagination:{pageSize:C,total:w,onChange:A}}),e.jsx(_,{title:S,open:v,onCancel:()=>u(!1),onOk:f,cancelText:"取消",okText:"确定",width:"45%",style:{top:100,height:"80vh"},bodyStyle:{maxHeight:"70vh",overflowY:"auto"},children:e.jsx(D,{children:e.jsxs(r,{form:i,labelCol:{span:4},wrapperCol:{span:18},initialValues:s,onFinish:f,children:[e.jsx(r.Item,{label:"id",name:"id",style:{display:"none"},children:e.jsx(m,{})}),e.jsx(r.Item,{label:"用户名",name:"name",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(m,{})}),e.jsx(r.Item,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱"}],children:e.jsx(m,{})}),e.jsx(r.Item,{label:"移动电话",name:"cellphone",rules:[{required:!0,message:"请输入移动电话"}],children:e.jsx(m,{})}),e.jsx(r.Item,{label:"密码",name:"passwd",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(m.Password,{})})]})})})]})},de=n.memo(ee);export{de as default};
